@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-friendly defaults */
html,
body,
#root {
  height: 100%;
}

body {
  background-color: #0a0a0b; /* matches bg-zinc-950 */
  color: #e5e7eb; /* text-zinc-200-ish */
  overscroll-behavior-y: none; /* avoid scroll chaining that can bump focus */
  position: relative;
}

/* Global “anchor” background (applies to every screen) */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;

  /* dark base + soft teal glow + subtle vignette */
  background:
    radial-gradient(900px 520px at 50% -140px, rgba(16, 185, 129, 0.10), rgba(0, 0, 0, 0) 60%),
    radial-gradient(820px 560px at 50% 46%, rgba(16, 185, 129, 0.06), rgba(0, 0, 0, 0) 62%),
    radial-gradient(1200px 900px at 50% 110%, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0) 70%),
    linear-gradient(180deg, #070708 0%, #0a0a0b 35%, #070708 100%);
}

/* Subtle noise to avoid “flat” gradients */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  opacity: 0.05;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  background-size: 220px 220px;
}

/* Safe areas for notches */
:root {
  --safe-bottom: env(safe-area-inset-bottom);

  /* UI tokens (presentation only) */
  --z-bg: #0a0a0b;
  --z-text: #e5e7eb;

  /* Surfaces */
  --z-surface: rgba(255, 255, 255, 0.06);
  --z-surface-strong: rgba(255, 255, 255, 0.08);
  --z-inset: rgba(0, 0, 0, 0.28);

  /* Borders (“felt, not seen”) */
  --z-border: rgba(255, 255, 255, 0.10);
  --z-border-soft: rgba(255, 255, 255, 0.08);

  /* Radii */
  --z-radius: 16px; /* 2xl-ish */
  --z-radius-lg: 20px;

  /* Focus ring */
  --z-ring: rgba(255, 255, 255, 0.18);
}

/* Disable selection/callout/highlight on pressable elements */
[data-press] {
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

button,
[role="button"] {
  -webkit-tap-highlight-color: transparent;
}

/* ------------------------------
   Shared UI primitives (Tailwind)
   ------------------------------ */
@layer components {
  /* Layout rhythm */
  .z-page {
    @apply w-full max-w-[760px] mx-auto px-4 sm:px-5;
  }

  .z-page-y {
    @apply py-4 sm:py-5;
  }

  .z-stack {
    @apply flex flex-col gap-3;
  }

  .z-stack-lg {
    @apply flex flex-col gap-4;
  }

  /* Surfaces */
  .z-surface {
    border-radius: var(--z-radius);
    border: 1px solid var(--z-border-soft);
    background: var(--z-surface);
    @apply shadow-sm;
  }

  .z-card {
    border-radius: var(--z-radius-lg);
    border: 1px solid var(--z-border);
    background: var(--z-surface-strong);
    @apply shadow-sm;
  }

  .z-inset {
    border-radius: var(--z-radius);
    border: 1px solid rgba(255, 255, 255, 0.06);
    background: var(--z-inset);
  }

  /* Typography */
  .z-title {
    @apply text-[20px] sm:text-[22px] font-semibold tracking-tight text-zinc-100;
  }

  .z-subtitle {
    @apply text-[13px] sm:text-[14px] text-zinc-400 leading-snug;
  }

  .z-section-title {
    @apply text-[12px] uppercase tracking-wide text-zinc-400;
  }

  .z-helper {
    @apply text-[12px] text-zinc-500 leading-snug;
  }

  /* Inputs */
  .z-input {
    @apply w-full rounded-2xl bg-zinc-950/60 border border-white/10
      px-3 py-3 text-zinc-100 placeholder:text-zinc-500
      outline-none;
  }

  .z-input:focus {
    box-shadow: 0 0 0 3px var(--z-ring);
    border-color: rgba(255, 255, 255, 0.16);
  }

  /* Buttons (hierarchy only; colours remain semantic in components) */
  .z-btn {
    @apply inline-flex items-center justify-center gap-2 select-none
      rounded-2xl px-4 py-3 text-[14px] font-medium
      border border-white/10 bg-white/5 text-zinc-100
      active:scale-[0.99] transition;
  }

  .z-btn-quiet {
    @apply bg-transparent border-white/0 text-zinc-300 hover:bg-white/5;
  }

  .z-btn-secondary {
    @apply bg-white/[0.06] border-white/10 text-zinc-100;
  }

  /* Segmented pill bar */
  .z-pillbar {
    @apply w-full rounded-2xl border border-white/10 bg-zinc-950/40
      p-1 inline-flex gap-1;
  }

  .z-pill {
    @apply flex-1 rounded-2xl px-3 py-2 text-[13px] text-zinc-300
      transition select-none;
  }

  .z-pill:hover {
    @apply bg-white/5 text-zinc-100;
  }

  .z-pill-active {
    @apply bg-emerald-600/40 text-emerald-200 border border-emerald-500/25;
  }

  /* Disabled states */
  .z-disabled {
    @apply opacity-50 pointer-events-none;
  }
}

/* =========================
   Premium mic button layers
   ========================= */
@layer utilities {
  .z-mic-glow {
    pointer-events: none;
    filter: blur(0px);
    opacity: 0.9;
    background: radial-gradient(
      circle at 50% 50%,
      rgba(16, 185, 129, 0.35) 0%,
      rgba(16, 185, 129, 0.18) 28%,
      rgba(16, 185, 129, 0.08) 48%,
      rgba(0, 0, 0, 0) 72%
    );
  }

  .z-mic-glow-off {
    opacity: 0.08;
    background: radial-gradient(
      circle at 50% 50%,
      rgba(255, 255, 255, 0.10) 0%,
      rgba(0, 0, 0, 0) 70%
    );
  }

  .z-mic-glow-soft {
    opacity: 0.55;
  }

  .z-mic-glow-strong {
    opacity: 0.95;
  }

  .z-mic-ring {
    pointer-events: none;
    border-radius: 9999px;
    background:
      radial-gradient(circle at 50% 45%, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0.00) 55%),
      radial-gradient(circle at 50% 50%, rgba(16,185,129,0.18) 0%, rgba(16,185,129,0.00) 60%);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.08),
      0 18px 60px rgba(0,0,0,0.55);
  }

  .z-mic-ring-off {
    opacity: 0.55;
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.06),
      0 16px 50px rgba(0,0,0,0.55);
  }

  .z-mic-ring-soft {
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.10),
      0 18px 60px rgba(0,0,0,0.60),
      0 0 28px rgba(16,185,129,0.10);
  }

  .z-mic-ring-strong {
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.12),
      0 18px 60px rgba(0,0,0,0.60),
      0 0 40px rgba(16,185,129,0.22);
  }

  .z-mic-disc {
    pointer-events: none;
    background: radial-gradient(
        circle at 50% 35%,
        rgba(255,255,255,0.10) 0%,
        rgba(255,255,255,0.00) 42%
      ),
      rgba(8, 10, 12, 0.55);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.08),
      inset 0 -18px 35px rgba(0,0,0,0.55);
    backdrop-filter: blur(10px);
  }

  .z-mic-iconBubble {
    width: 66px;
    height: 66px;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 160ms ease, box-shadow 160ms ease;
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.10),
      0 10px 30px rgba(0,0,0,0.55);
  }

  .z-mic-iconBubble-off {
    background: rgba(255,255,255,0.05);
  }

  .z-mic-iconBubble-on {
    background: rgba(16,185,129,0.85);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.18),
      0 12px 34px rgba(0,0,0,0.55),
      0 0 26px rgba(16,185,129,0.28);
  }

  /* Pulse that targets the glow layers (recording/transcribing/translating) */
  @keyframes zMicPulse {
    0% { transform: scale(1); opacity: 0.92; }
    50% { transform: scale(1.04); opacity: 1; }
    100% { transform: scale(1); opacity: 0.92; }
  }

  .z-mic-pulse {
    animation: zMicPulse 1.25s ease-in-out infinite;
  }

  /* Home buttons closer to render (more pill-like, cleaner) */
  .z-home-pillBtn {
    border-radius: 9999px;
    padding: 10px 22px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.45);
  }

  .z-home-pillBtn-secondary {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.10);
  }
}
